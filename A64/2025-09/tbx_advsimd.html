<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="insn.css"/><meta name="generator" content="iform.xsl"/><title>TBX -- A64</title></head><body><table style="margin: 0 auto;"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="sveindex.html">SVE Instructions</a></div></td><td><div class="topbar"><a href="mortlachindex.html">SME Instructions</a></div></td><td><div class="topbar"><a href="encodingindex.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><hr/><h2 class="instruction-section">TBX</h2><p>Table vector lookup extension</p>
      <p class="aml">This instruction reads each value from the vector elements in the index source SIMD&amp;FP register,
uses each result as an index to perform a lookup in a table of bytes that
is described by one to four source table SIMD&amp;FP registers,
places the lookup result in a vector, and writes
the vector to the destination SIMD&amp;FP register.
If an index is out of range for the table, the existing value in the vector element
of the destination register is left unchanged.
If more than one source register is used to describe the table,
the first source register describes the lowest bytes of the table.</p>
      <p class="aml">Depending on the settings in the CPACR_EL1,
  CPTR_EL2, and CPTR_EL3 registers,
  and the current Security state and Exception level,
  an attempt to execute the instruction might be trapped.</p>
    
    <h3 class="classheading"><a id="iclass_advanced_simd"/>Advanced SIMD<span style="font-size:smaller;"><br/>(FEAT_AdvSIMD)
          </span></h3><p class="desc"/><div class="regdiagram-32"><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="lr">0</td><td class="lr">Q</td><td class="l">0</td><td>0</td><td>1</td><td>1</td><td>1</td><td class="r">0</td><td class="l">0</td><td class="r">0</td><td class="lr">0</td><td colspan="5" class="lr">Rm</td><td class="lr">0</td><td colspan="2" class="lr">len</td><td class="lr">1</td><td class="l">0</td><td class="r">0</td><td colspan="5" class="lr">Rn</td><td colspan="5" class="lr">Rd</td></tr><tr class="secondrow"><td/><td/><td colspan="6"/><td colspan="2" class="droppedname">op2</td><td/><td colspan="5"/><td/><td colspan="2"/><td class="droppedname">op</td><td colspan="2"/><td colspan="5"/><td colspan="5"/></tr></tbody></table></div><div class="encoding"><h4 class="encoding">
              Encoding for the Single register table variant
            </h4><a id="TBX_asimdtbl_L1_1"/>
        Applies when
        <span class="bitdiff"> (len == 00)</span><p class="asm-code">TBX  <a href="#Vd" title="Is the name of the SIMD&amp;FP destination register, encoded in the &quot;Rd&quot; field.">&lt;Vd&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a>, { <a href="#Vn__3" title="For the &quot;Single register table&quot; variant: is the name of the SIMD&amp;FP table register, encoded in the &quot;Rn&quot; field.">&lt;Vn&gt;</a>.16B }, <a href="#Vm__3" title="Is the name of the SIMD&amp;FP index register, encoded in the &quot;Rm&quot; field.">&lt;Vm&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a></p></div><div class="encoding"><h4 class="encoding">
              Encoding for the Two register table variant
            </h4><a id="TBX_asimdtbl_L2_2"/>
        Applies when
        <span class="bitdiff"> (len == 01)</span><p class="asm-code">TBX  <a href="#Vd" title="Is the name of the SIMD&amp;FP destination register, encoded in the &quot;Rd&quot; field.">&lt;Vd&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a>, { <a href="#Vn__4" title="For the &quot;Four register table&quot;, &quot;Three register table&quot;, and &quot;Two register table&quot; variants: is the name of the first SIMD&amp;FP table register, encoded in the &quot;Rn&quot; field.">&lt;Vn&gt;</a>.16B, <a href="#VnPlus1" title="Is the name of the second SIMD&amp;FP table register, encoded as &quot;Rn&quot; plus 1 modulo 32.">&lt;Vn+1&gt;</a>.16B }, <a href="#Vm__3" title="Is the name of the SIMD&amp;FP index register, encoded in the &quot;Rm&quot; field.">&lt;Vm&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a></p></div><div class="encoding"><h4 class="encoding">
              Encoding for the Three register table variant
            </h4><a id="TBX_asimdtbl_L3_3"/>
        Applies when
        <span class="bitdiff"> (len == 10)</span><p class="asm-code">TBX  <a href="#Vd" title="Is the name of the SIMD&amp;FP destination register, encoded in the &quot;Rd&quot; field.">&lt;Vd&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a>, { <a href="#Vn__4" title="For the &quot;Four register table&quot;, &quot;Three register table&quot;, and &quot;Two register table&quot; variants: is the name of the first SIMD&amp;FP table register, encoded in the &quot;Rn&quot; field.">&lt;Vn&gt;</a>.16B, <a href="#VnPlus1" title="Is the name of the second SIMD&amp;FP table register, encoded as &quot;Rn&quot; plus 1 modulo 32.">&lt;Vn+1&gt;</a>.16B, <a href="#VnPlus2" title="Is the name of the third SIMD&amp;FP table register, encoded as &quot;Rn&quot; plus 2 modulo 32.">&lt;Vn+2&gt;</a>.16B }, <a href="#Vm__3" title="Is the name of the SIMD&amp;FP index register, encoded in the &quot;Rm&quot; field.">&lt;Vm&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a></p></div><div class="encoding"><h4 class="encoding">
              Encoding for the Four register table variant
            </h4><a id="TBX_asimdtbl_L4_4"/>
        Applies when
        <span class="bitdiff"> (len == 11)</span><p class="asm-code">TBX  <a href="#Vd" title="Is the name of the SIMD&amp;FP destination register, encoded in the &quot;Rd&quot; field.">&lt;Vd&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a>, { <a href="#Vn__4" title="For the &quot;Four register table&quot;, &quot;Three register table&quot;, and &quot;Two register table&quot; variants: is the name of the first SIMD&amp;FP table register, encoded in the &quot;Rn&quot; field.">&lt;Vn&gt;</a>.16B, <a href="#VnPlus1" title="Is the name of the second SIMD&amp;FP table register, encoded as &quot;Rn&quot; plus 1 modulo 32.">&lt;Vn+1&gt;</a>.16B, <a href="#VnPlus2" title="Is the name of the third SIMD&amp;FP table register, encoded as &quot;Rn&quot; plus 2 modulo 32.">&lt;Vn+2&gt;</a>.16B, <a href="#VnPlus3" title="Is the name of the fourth SIMD&amp;FP table register, encoded as &quot;Rn&quot; plus 3 modulo 32.">&lt;Vn+3&gt;</a>.16B }, <a href="#Vm__3" title="Is the name of the SIMD&amp;FP index register, encoded in the &quot;Rm&quot; field.">&lt;Vm&gt;</a>.<a href="#Ta_option__2" title="Is an arrangement specifier, ">&lt;Ta&gt;</a></p></div><h4>Decode for all variants of this encoding</h4><p class="pseudocode">if !IsFeatureImplemented(FEAT_AdvSIMD) then EndOfDecode(<a href="shared_pseudocode.html#enum_Decode_UNDEF" title="">Decode_UNDEF</a>); end;
let d : integer = UInt(Rd);
let n : integer = UInt(Rn);
let m : integer = UInt(Rm);

let datasize : integer{} = 64 &lt;&lt; UInt(Q);
let elements : integer = datasize DIV 8;
let regs : integer{} = UInt(len) + 1;
let is_tbl : boolean = (op == '0');</p>
  <div class="encoding-notes"/><h3 class="explanations">Assembler Symbols</h3><div class="explanations"><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Vd&gt;</td><td><a id="Vd"/>
        
          <p class="aml">Is the name of the SIMD&amp;FP destination register, encoded in the "Rd" field.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Ta&gt;</td><td><a id="Ta_option__2"/>
        <p>Is an arrangement specifier, 
          encoded in
          <q>Q</q>:
            </p>
        <table class="valuetable">
          
            <thead>
              <tr>
                <th class="bitfield">Q</th>
                <th class="symbol">&lt;Ta&gt;</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="bitfield">0</td>
                <td class="symbol">8B</td>
              </tr>
              <tr>
                <td class="bitfield">1</td>
                <td class="symbol">16B</td>
              </tr>
            </tbody>
          
        </table>
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Vn&gt;</td><td><a id="Vn__3"/>
        
          <p class="aml">For the "Single register table" variant: is the name of the SIMD&amp;FP table register, encoded in the "Rn" field.</p>
        
      </td></tr><tr><td/><td><a id="Vn__4"/>
        
          <p class="aml">For the "Four register table", "Three register table", and "Two register table" variants: is the name of the first SIMD&amp;FP table register, encoded in the "Rn" field.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Vm&gt;</td><td><a id="Vm__3"/>
        
          <p class="aml">Is the name of the SIMD&amp;FP index register, encoded in the "Rm" field.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Vn+1&gt;</td><td><a id="VnPlus1"/>
        
          <p class="aml">Is the name of the second SIMD&amp;FP table register, encoded as "Rn" plus 1 modulo 32.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Vn+2&gt;</td><td><a id="VnPlus2"/>
        
          <p class="aml">Is the name of the third SIMD&amp;FP table register, encoded as "Rn" plus 2 modulo 32.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Vn+3&gt;</td><td><a id="VnPlus3"/>
        
          <p class="aml">Is the name of the fourth SIMD&amp;FP table register, encoded as "Rn" plus 3 modulo 32.</p>
        
      </td></tr></table></div><div class="syntax-notes"/>
    <div class="ps"><a id=""/><h3 class="pseudocode">Operation</h3>
      <p class="pseudocode">AArch64_CheckFPAdvSIMDEnabled();
let indices : bits(datasize) = V{}(m);
var table : bits(128*regs) = Zeros{};
var result : bits(datasize);
var index : integer;

// Create table from registers
for i = 0 to regs - 1 do
    table[i*:128] = V{128}((n+i) MOD 32);
end;

result = if is_tbl then Zeros{datasize} else V{datasize}(d);
for i = 0 to elements - 1 do
    index = UInt(indices[i*:8]);
    if index &lt; 16 * regs then
        result[i*:8] = table[index*:8];
    end;
end;

V{datasize}(d) = result;</p>
    </div>
  <h3>Operational information</h3>
    
      
        <p class="aml">This instruction is a data-independent-time instruction as described in <a class="armarm-xref" title="Reference to Armv8 ARM section" data-linkend="ARMARM_BEICCDDAB3">About PSTATE.DIT</a>.</p>
      
    
  <hr/><table style="margin: 0 auto;"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="sveindex.html">SVE Instructions</a></div></td><td><div class="topbar"><a href="mortlachindex.html">SME Instructions</a></div></td><td><div class="topbar"><a href="encodingindex.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><p class="versions">
      2025-09_rel_asl1

      2025-10-24 12:15:02
    </p><p class="copyconf">
      Copyright Â© 2010-2025 Arm Limited or its affiliates. All rights reserved.
      This document is Non-Confidential.
    </p></body></html>
