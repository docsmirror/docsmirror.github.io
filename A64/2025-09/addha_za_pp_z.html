<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="insn.css"/><meta name="generator" content="iform.xsl"/><title>ADDHA -- A64</title></head><body><table style="margin: 0 auto;"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="sveindex.html">SVE Instructions</a></div></td><td><div class="topbar"><a href="mortlachindex.html">SME Instructions</a></div></td><td><div class="topbar"><a href="encodingindex.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><hr/><h2 class="instruction-section">ADDHA</h2><p>Add horizontally vector elements to ZA tile</p>
      <p class="aml">This instruction adds each element of the source vector to the corresponding
Active element of each horizontal slice of a ZA tile.
The tile elements are predicated by a pair of governing predicates.
An element of a horizontal slice is considered active if its
corresponding element in the second governing predicate is TRUE
and the element corresponding to its horizontal slice number
in the first governing predicate is TRUE.
Inactive elements in the destination tile remain unmodified.</p>
      <p class="aml">ID_AA64SMFR0_EL1.I16I64 indicates whether the 64-bit integer variant is implemented.</p>
    
    <p class="desc">
      It has encodings from 2 classes:
      <a href="#iclass_32_bit">32-bit</a>
       and 
      <a href="#iclass_64_bit">64-bit</a>
    </p>
    <h3 class="classheading"><a id="iclass_32_bit"/>32-bit<span style="font-size:smaller;"><br/>(FEAT_SME)
          </span></h3><div class="regdiagram-32"><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="lr">1</td><td class="l">1</td><td class="r">0</td><td class="l">0</td><td>0</td><td>0</td><td class="r">0</td><td class="lr">0</td><td class="lr">1</td><td class="lr">0</td><td class="l">0</td><td>1</td><td class="r">0</td><td class="l">0</td><td class="r">0</td><td class="lr">0</td><td colspan="3" class="lr">Pm</td><td colspan="3" class="lr">Pn</td><td colspan="5" class="lr">Zn</td><td class="lr">0</td><td class="lr">0</td><td class="lr">0</td><td colspan="2" class="lr">ZAda</td></tr><tr class="secondrow"><td/><td colspan="2"/><td colspan="4"/><td/><td/><td class="droppedname">op</td><td colspan="3"/><td colspan="2"/><td class="droppedname">V</td><td colspan="3"/><td colspan="3"/><td colspan="5"/><td/><td/><td/><td colspan="2"/></tr></tbody></table></div><div class="encoding"><h4 class="encoding">Encoding</h4><a id="addha_za_pp_z_32"/><p class="asm-code">ADDHA  <a href="#ZAda" title="For the &quot;32-bit&quot; variant: is the name of the ZA tile ZA0-ZA3, encoded in the &quot;ZAda&quot; field.">&lt;ZAda&gt;</a>.S, <a href="#Pn" title="Is the name of the first governing scalable predicate register P0-P7, encoded in the &quot;Pn&quot; field.">&lt;Pn&gt;</a>/M, <a href="#Pm" title="Is the name of the second governing scalable predicate register P0-P7, encoded in the &quot;Pm&quot; field.">&lt;Pm&gt;</a>/M, <a href="#Zn" title="Is the name of the source scalable vector register, encoded in the &quot;Zn&quot; field.">&lt;Zn&gt;</a>.S</p></div><h4>Decode for this encoding</h4><p class="pseudocode">if !IsFeatureImplemented(FEAT_SME) then EndOfDecode(<a href="shared_pseudocode.html#enum_Decode_UNDEF" title="">Decode_UNDEF</a>); end;
let esize : integer{} = 32;
let a : integer = UInt(Pn);
let b : integer = UInt(Pm);
let n : integer = UInt(Zn);
let da : integer = UInt(ZAda);</p>
    <h3 class="classheading"><a id="iclass_64_bit"/>64-bit<span style="font-size:smaller;"><br/>(FEAT_SME_I16I64)
          </span></h3><div class="regdiagram-32"><table class="regdiagram"><thead><tr><td>31</td><td>30</td><td>29</td><td>28</td><td>27</td><td>26</td><td>25</td><td>24</td><td>23</td><td>22</td><td>21</td><td>20</td><td>19</td><td>18</td><td>17</td><td>16</td><td>15</td><td>14</td><td>13</td><td>12</td><td>11</td><td>10</td><td>9</td><td>8</td><td>7</td><td>6</td><td>5</td><td>4</td><td>3</td><td>2</td><td>1</td><td>0</td></tr></thead><tbody><tr class="firstrow"><td class="lr">1</td><td class="l">1</td><td class="r">0</td><td class="l">0</td><td>0</td><td>0</td><td class="r">0</td><td class="lr">0</td><td class="lr">1</td><td class="lr">1</td><td class="l">0</td><td>1</td><td class="r">0</td><td class="l">0</td><td class="r">0</td><td class="lr">0</td><td colspan="3" class="lr">Pm</td><td colspan="3" class="lr">Pn</td><td colspan="5" class="lr">Zn</td><td class="lr">0</td><td class="lr">0</td><td colspan="3" class="lr">ZAda</td></tr><tr class="secondrow"><td/><td colspan="2"/><td colspan="4"/><td/><td/><td class="droppedname">op</td><td colspan="3"/><td colspan="2"/><td class="droppedname">V</td><td colspan="3"/><td colspan="3"/><td colspan="5"/><td/><td/><td colspan="3"/></tr></tbody></table></div><div class="encoding"><h4 class="encoding">Encoding</h4><a id="addha_za_pp_z_64"/><p class="asm-code">ADDHA  <a href="#ZAda__2" title="For the &quot;64-bit&quot; variant: is the name of the ZA tile ZA0-ZA7, encoded in the &quot;ZAda&quot; field.">&lt;ZAda&gt;</a>.D, <a href="#Pn" title="Is the name of the first governing scalable predicate register P0-P7, encoded in the &quot;Pn&quot; field.">&lt;Pn&gt;</a>/M, <a href="#Pm" title="Is the name of the second governing scalable predicate register P0-P7, encoded in the &quot;Pm&quot; field.">&lt;Pm&gt;</a>/M, <a href="#Zn" title="Is the name of the source scalable vector register, encoded in the &quot;Zn&quot; field.">&lt;Zn&gt;</a>.D</p></div><h4>Decode for this encoding</h4><p class="pseudocode">if !IsFeatureImplemented(FEAT_SME_I16I64) then EndOfDecode(<a href="shared_pseudocode.html#enum_Decode_UNDEF" title="">Decode_UNDEF</a>); end;
let esize : integer{} = 64;
let a : integer = UInt(Pn);
let b : integer = UInt(Pm);
let n : integer = UInt(Zn);
let da : integer = UInt(ZAda);</p>
  <div class="encoding-notes"/><h3 class="explanations">Assembler Symbols</h3><div class="explanations"><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;ZAda&gt;</td><td><a id="ZAda"/>
        
          <p class="aml">For the "32-bit" variant: is the name of the ZA tile ZA0-ZA3, encoded in the "ZAda" field.</p>
        
      </td></tr><tr><td/><td><a id="ZAda__2"/>
        
          <p class="aml">For the "64-bit" variant: is the name of the ZA tile ZA0-ZA7, encoded in the "ZAda" field.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Pn&gt;</td><td><a id="Pn"/>
        
          <p class="aml">Is the name of the first governing scalable predicate register P0-P7, encoded in the "Pn" field.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Pm&gt;</td><td><a id="Pm"/>
        
          <p class="aml">Is the name of the second governing scalable predicate register P0-P7, encoded in the "Pm" field.</p>
        
      </td></tr></table><table><col class="asyn-l"/><col class="asyn-r"/><tr><td>&lt;Zn&gt;</td><td><a id="Zn"/>
        
          <p class="aml">Is the name of the source scalable vector register, encoded in the "Zn" field.</p>
        
      </td></tr></table></div><div class="syntax-notes"/>
    <div class="ps"><a id=""/><h3 class="pseudocode">Operation</h3>
      <p class="pseudocode">CheckStreamingSVEAndZAEnabled();
let VL : integer{} = CurrentVL();
let PL : integer{} = VL DIV 8;
let dim : integer{} = VL DIV esize;
let mask1 : bits(PL) = P{}(a);
let mask2 : bits(PL) = P{}(b);
let operand_src : bits(VL) = Z{}(n);
let operand_acc : bits(dim*dim*esize) = ZAtile{}(da, esize);
var result : bits(dim*dim*esize);

for col = 0 to dim-1 do
    let element : bits(esize) = operand_src[col*:esize];
    for row = 0 to dim-1 do
        var res : bits(esize) = operand_acc[(row*dim+col)*:esize];
        if (<a href="shared_pseudocode.html#func_ActivePredicateElement_4" title="">ActivePredicateElement</a>{PL}(mask1, row, esize) &amp;&amp;
              <a href="shared_pseudocode.html#func_ActivePredicateElement_4" title="">ActivePredicateElement</a>{PL}(mask2, col, esize)) then
            res = res + element;
        end;
        result[(row*dim+col)*:esize] = res;
    end;
end;

ZAtile{dim*dim*esize}(da, esize) = result;</p>
    </div>
  <h3>Operational information</h3>
    
      
        <p class="aml">This instruction is a data-independent-time instruction as described in <a class="armarm-xref" title="Reference to Armv8 ARM section" data-linkend="ARMARM_BEICCDDAB3">About PSTATE.DIT</a>.</p>
      
    
  <hr/><table style="margin: 0 auto;"><tr><td><div class="topbar"><a href="index.html">Base Instructions</a></div></td><td><div class="topbar"><a href="fpsimdindex.html">SIMD&amp;FP Instructions</a></div></td><td><div class="topbar"><a href="sveindex.html">SVE Instructions</a></div></td><td><div class="topbar"><a href="mortlachindex.html">SME Instructions</a></div></td><td><div class="topbar"><a href="encodingindex.html">Index by Encoding</a></div></td><td><div class="topbar"><a href="shared_pseudocode.html">Shared Pseudocode</a></div></td><td><div class="topbar"><a href="notice.html">Proprietary Notice</a></div></td></tr></table><p class="versions">
      2025-09_rel_asl1

      2025-10-24 12:15:02
    </p><p class="copyconf">
      Copyright Â© 2010-2025 Arm Limited or its affiliates. All rights reserved.
      This document is Non-Confidential.
    </p></body></html>
